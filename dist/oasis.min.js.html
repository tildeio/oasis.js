/*<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" >
<script>
(function() {
  function hide() {
    var html = document.body.innerHTML;
    document.body.innerHTML = html.substring(2, html.lastIndexOf('*\/')-2);
    document.body.style.display = '';
  }

  if (window.addEventListener) {
    window.addEventListener('load', hide);
  } else if (window.attachEvent) {
    window.attachEvent('onload', hide);
  }
})();
</script>
<script type="text/x-js-payload" id="jsfr_payload">
// */

function UUID(){}if("function"!=typeof define&&"function"!=typeof requireModule){var define,requireModule;!function(){var a={},b={};define=function(b,c,d){a[b]={deps:c,callback:d}},requireModule=function(c){if(b[c])return b[c];var d=a[c];if(!d)throw new Error("Module: '"+c+"' not found.");for(var e,f=d.deps,g=d.callback,h=[],i=0,j=f.length;j>i;i++)"exports"===f[i]?h.push(e={}):h.push(requireModule(f[i]));var k=g.apply(this,h);return b[c]=e||k},define.registry=a,define.seen=b}()}!function(a){var b,c,d,e={}.toString;Kamino={},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Kamino),exports.Kamino=Kamino):a.Kamino=Kamino,Kamino.VERSION="0.1.0",KaminoException=function(){this.name="KaminoException",this.number=25,this.message="Uncaught Error: DATA_CLONE_ERR: Kamino Exception 25"};var f=new Date(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1==f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(g){}var h="A"!="A"[0];f||Math.floor,(b={}.hasOwnProperty)||(b=function(a){var c,d={};return(d.__proto__=null,d.__proto__={toString:1},d).toString!=e?b=function(a){var b=this.__proto__,c=(this.__proto__=null,a in this);return this.__proto__=b,c}:(c=d.constructor,b=function(a){var b=(this.constructor||c).prototype;return a in this&&!(a in b&&this[a]===b[a])}),d=null,b.call(this,a)}),c=function(a,c){var d,f,g,h,i=0;(d=function(){this.valueOf=0}).prototype.valueOf=0,f=new d;for(g in f)b.call(f,g)&&i++;return d=f=null,i?h=2==i?function(a,c){var d,f={},g="[object Function]"==e.call(a);for(d in a)g&&"prototype"==d||b.call(f,d)||!(f[d]=1)||!b.call(a,d)||c(d)}:function(a,c){var d,f,g="[object Function]"==e.call(a);for(d in a)g&&"prototype"==d||!b.call(a,d)||(f="constructor"===d)||c(d);(f||b.call(a,d="constructor"))&&c(d)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],h=function(a,c){var d,g,h="[object Function]"==e.call(a);for(d in a)h&&"prototype"==d||!b.call(a,d)||c(d);for(g=f.length;d=f[--g];b.call(a,d)&&c(d));}),h(a,c)};var i={"\\":"\\\\",'"':'\\"',"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},j=function(a,b){return("000000"+(b||0)).slice(-a)},k=function(a){for(var b,c='"',d=0;b=a.charAt(d);d++)c+='\\"\b\f\n\r	'.indexOf(b)>-1?i[b]:i[b]=" ">b?"\\u00"+j(2,b.charCodeAt(0).toString(16)):b;return c+'"'},l=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},m=function(a,f,g,i,j,n,o){var p,q,r,s,t,u,v,w,x,y,z=f[a],A="";if(z instanceof Error||z instanceof Function)throw new KaminoException;if(l(z))throw new KaminoException;if("object"==typeof z&&z&&(p=e.call(z),"[object Date]"!=p||b.call(z,"toJSON")?"function"==typeof z.toJSON&&("[object Number]"!=p&&"[object String]"!=p&&"[object Array]"!=p||b.call(z,"toJSON"))&&(z=z.toJSON(a)):z=z>-1/0&&1/0>z?z.toUTCString().replace("GMT","UTC"):null),g&&(z=g.call(f,a,z)),null===z)return"null";if(void 0===z)return void 0;if(q=e.call(z),"[object Boolean]"==q)return""+z;if("[object Number]"==q)return z===Number.POSITIVE_INFINITY?"Infinity":z===Number.NEGATIVE_INFINITY?"NInfinity":isNaN(z)?"NaN":""+z;if("[object RegExp]"==q)return y=z.source,A+=z.ignoreCase?"i":"",A+=z.global?"g":"",A+=z.multiline?"m":"",y=k(h?y.split(""):y),A=k(h?A.split(""):A),z="^"+y+A;if("[object String]"==q)return z=k(h?z.split(""):z),"[object Date]"==p&&(z="%"+z),z;if("object"==typeof z){for(u=o.length;u--;)if(o[u]===z)return"&"+u;if(o.push(z),r=[],v=n,n+=j,"[object Array]"==q){for(t=0,u=z.length;u>t;w||(w=!0),t++)s=m(t,z,g,i,j,n,o),r.push(s===d?"null":s);x=w?j?"[\n"+n+r.join(",\n"+n)+"\n"+v+"]":"["+r.join(",")+"]":"[]"}else c(i||z,function(a){var b=m(a,z,g,i,j,n,o);b!==d&&r.push(k(h?a.split(""):a)+":"+(j?" ":"")+b),w||(w=!0)}),x=w?j?"{\n"+n+r.join(",\n"+n)+"\n"+v+"}":"{"+r.join(",")+"}":"{}";return x}};Kamino.stringify=function(a,b,c){var d,f,g;if("function"==typeof b||"object"==typeof b&&b)if("[object Function]"==e.call(b))f=b;else if("[object Array]"==e.call(b)){g={};for(var h,i=0,j=b.length;j>i;h=b[i++],("[object String]"==e.call(h)||"[object Number]"==e.call(h))&&(g[h]=1));}if(c)if("[object Number]"==e.call(c)){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else"[object String]"==e.call(c)&&(d=c.length<=10?c:c.slice(0,10));return m("",(h={},h[""]=a,h),f,g,d,"",[])};var n,o,p,q=String.fromCharCode,r={"\\":"\\",'"':'"',"/":"/",b:"\b",t:"	",n:"\n",f:"\f",r:"\r"},s=function(){throw n=o=null,SyntaxError()},t=function(a){a=a||"";var b,c,d,e,f=o,g=f.length;for(b=a,n++;g>n;)if(c=f[n]," ">c)s();else if("\\"==c)if(c=f[++n],'\\"/btnfr'.indexOf(c)>-1)b+=r[c],n++;else if("u"==c){for(d=++n,e=n+4;e>n;n++)c=f[n],c>="0"&&"9">=c||c>="a"&&"f">=c||c>="A"&&"F">=c||s();b+=q("0x"+f.slice(d,n))}else s();else{if('"'==c)break;b+=c,n++}return'"'==f[n]?(n++,b):(s(),void 0)},u=function(){for(var a,b,c,d,e,f,g,h=o,i=h.length;i>n;)if(a=h[n],"	\r\n ".indexOf(a)>-1)n++;else{if("{}[]:,".indexOf(a)>-1)return n++,a;if('"'==a)return t("@");if("%"==a){if(n++,a=h[n],'"'==a)return e=t(),new Date(e);s()}else if("^"==a){if(n++,a=h[n],'"'==a&&(f=t(),a=h[n],'"'==a))return g=t(),new RegExp(f,g);s()}else if("&"==a){if(n++,a=h[n],a>="0"&&"9">=a)return n++,p[a];s()}else{if(b=n,"-"==a&&(d=!0,a=h[++n]),a>="0"&&"9">=a){for("0"==a&&(a=h[n+1],a>="0"&&"9">=a)&&s(),d=!1;i>n&&(a=h[n],a>="0"&&"9">=a);n++);if("."==h[n]){for(c=++n;i>c&&(a=h[c],a>="0"&&"9">=a);c++);c==n&&s(),n=c}if(a=h[n],"e"==a||"E"==a){for(a=h[++n],("+"==a||"-"==a)&&n++,c=n;i>c&&(a=h[c],a>="0"&&"9">=a);c++);c==n&&s(),n=c}return+h.slice(b,n)}if(d&&s(),"true"==h.slice(n,n+4))return n+=4,!0;if("false"==h.slice(n,n+5))return n+=5,!1;if("Infinity"==h.slice(n,n+8))return n+=8,1/0;if("NInfinity"==h.slice(n,n+9))return n+=9,-1/0;if("NaN"==h.slice(n,n+3))return n+=3,0/0;if("null"==h.slice(n,n+4))return n+=4,null;s()}}return"$"},v=function(a){var b,c;if("$"==a&&s(),"string"==typeof a){if("@"==a[0])return a.slice(1);if("["==a){for(b=[],p[p.length]=b;a=u(),"]"!=a;c||(c=!0))c&&(","==a?(a=u(),"]"==a&&s()):s()),","==a&&s(),b.push(v("string"==typeof a&&h?a.split(""):a));return b}if("{"==a){for(b={},p[p.length]=b;a=u(),"}"!=a;c||(c=!0)){c&&(","==a?(a=u(),"}"==a&&s()):s()),(","==a||"string"!=typeof a||"@"!=a[0]||":"!=u())&&s();var d=u();b[a.slice(1)]=v("string"==typeof d&&h?d.split(""):d)}return b}s()}return a},w=function(a,b,c){var e=x(a,b,c);e===d?delete a[b]:a[b]=e},x=function(a,b,d){var f,g=a[b];if("object"==typeof g&&g)if("[object Array]"==e.call(g))for(f=g.length;f--;)w(g,f,d);else c(g,function(a){w(g,a,d)});return d.call(a,b,g)};Kamino.parse=function(a,b){var c,d;return n=0,o=""+a,p=[],h&&(o=a.split("")),c=v(u()),"$"!=u()&&s(),n=o=null,b&&"[object Function]"==e.call(b)?x((d={},d[""]=c,d),"",b):c},Kamino.clone=function(a){return Kamino.parse(Kamino.stringify(a))}}(this),function(a){var b=a,c=b.Window,d=!1,e=[].slice;if(d||!b.MessageChannel){var f=function(a){return"undefined"!=typeof window&&b instanceof c&&(!b.Worker||!(a instanceof Worker))},g=function(){if(j.verbose){var a=e.apply(arguments);a.unshift("MCNP: "),console.log.apply(console,a)}},h={},i=b.MessagePort=function(a){this._entangledPortUuid=null,this.destinationUrl=null,this._listeners={},this._messageQueue=[],this._messageQueueEnabled=!1,this._currentTarget=null,this.uuid=a||UUID.generate(),h[this.uuid]=this,this.log("created")};i.prototype={start:function(){var a,b=this;setTimeout(function(){for(b.log("draining "+b._messageQueue.length+" queued messages");b._messageQueueEnabled&&(a=b._messageQueue.shift());)b.dispatchEvent(a)}),this._messageQueueEnabled=!0,this.log("started")},close:function(){this._messageQueueEnabled=!1,this._entangledPortUuid&&(this._getEntangledPort()._entangledPortUuid=null,this._entangledPortUuid=null)},postMessage:function(a){var b,c=this._getEntangledPort(),d=this._currentTarget;return b=j.encodeEvent(a,[c],!0),c?(d?f(d)?(this.log("posting message from window to window",a,this.destinationUrl),d.postMessage(b,this.destinationUrl)):(this.log("posting message from or to worker",a),d.postMessage(b)):(this.log("not connected, queueing message",a),c._messageQueue.push(b)),void 0):(this.log("not entangled, discarding message",a),void 0)},addEventListener:function(a,b){"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)},removeEventListener:function(a,b){if(this._listeners[a]instanceof Array)for(var c=this._listeners[a],d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},dispatchEvent:function(a){var b=this._listeners.message;if(b)for(var c=0;c<b.length;c++)b[c].call(this,a)},_enqueueEvent:function(a){this._messageQueueEnabled?this.dispatchEvent(a):this._messageQueue.push(a)},_getPort:function(a,c,d){var e=function(a){var b=h[a]||j._createPort(a);return b},f=e(a.uuid);if(f._entangledPortUuid=a._entangledPortUuid,f._getEntangledPort()._entangledPortUuid=f.uuid,f._currentTarget=c.source||c.currentTarget||b,f.destinationUrl="null"===c.origin?"*":c.origin,d)for(var g=0;g<a._messageQueue.length;g++)f._messageQueue.push(Kamino.parse(a._messageQueue[g]).event);return f},_getEntangledPort:function(){return this._entangledPortUuid?h[this._entangledPortUuid]||j._createPort(this._entangledPortUuid):null},log:function(){if(j.verbose){var a=e.apply(arguments);a.unshift("Port",this.uuid),g.apply(null,a)}}};var j=b.MessageChannel=function(){var a,b=j._createPort(),c=j._createPort();return b._entangledPortUuid=c.uuid,c._entangledPortUuid=b.uuid,a={port1:b,port2:c},j.log(a,"created"),a};j.log=function(a){if(j.verbose){var b=["Chnl"],c=e.call(arguments,1);a.port1&&a.port2?b.push(a.port1.uuid,a.port2.uuid):a.forEach(function(a){b.push(a._entangledPortUuid)}),b.push.apply(b,c),g.apply(null,b)}},j._createPort=function(){var a=arguments,b=function(){return i.apply(this,a)};return b.prototype=i.prototype,new b},j.encodeEvent=function(a,b,c){var d,e,f,g;if(b&&b.length)for(d=[],f=0;f<b.length;f++)e=b[f],e&&(d[f]=e._currentTarget,delete e._currentTarget);if(g=Kamino.stringify({event:{data:a,ports:b,messageChannel:c}}),d)for(f=0;f<d.length;f++)d[f]&&(b[f]._currentTarget=d[f]);return g},j.decodeEvent=function(a,b){var c={data:null,ports:[]},d=Kamino.parse(a.data),e=d.event,f=e.ports;if(e){if(f)for(var g=0;g<f.length;g++)c.ports.push(i.prototype._getPort(f[g],a,b));c.data=e.data,c.messageChannel=e.messageChannel}return c};var k=function(a,b){var c;try{c=j.decodeEvent(a,b)}catch(d){if(!(d instanceof SyntaxError))throw d;c=a}return c},l=function(a){var b=k(a,!0);b.messageChannel&&j.propagateEvent(b)},m=function(a){a.addEventListener?a.addEventListener("message",l,!1):a.attachEvent&&a.attachEvent("onmessage",l)},n=function(a){var b,c,d,e,f;a.addEventListener?(b=a.addEventListener,c="addEventListener",d=a.removeEventListener,e="removeEventListener",f="message"):a.attachEvent&&(b=a.attachEvent,c="attachEvent",d=a.detachEvent,e="detachEvent",f="onmessage"),a[c]=function(){var a,c=Array.prototype.slice.call(arguments),d=c[1],e=this;c[0]===f&&(a=function(a){var b=k(a);b.messageChannel||d.call(e,b)},d.messageHandlerWrapper=a,c[1]=a),b.apply(this,c)},a[e]=function(){var a=Array.prototype.slice.call(arguments),b=a[1];a[0]===f&&(a[1]=b.messageHandlerWrapper,delete b.messageHandlerWrapper),a[1]&&d.apply(this,a)}};if(j.propagateEvent=function(a){var b,c,d;if(a.messageChannel){b=a.ports;for(var e=0;e<b.length;e++)c=b[e],d=c._getEntangledPort(),c._currentTarget&&d._currentTarget?d.postMessage(a.data):c._enqueueEvent(a)}},j.reset=function(){h={}},m(b),c?(c.postMessage=function(a,b,c,d){var e,f;if(d=d||[],e=j.encodeEvent(b,d,!1),d)for(var g=0;g<d.length;g++)f=d[g]._getEntangledPort(),f._currentTarget||(f._currentTarget=a,f.destinationUrl=c);j.log(d,"handshake window",a),a.postMessage(e,c)},n(c.prototype)):n(b),b.Worker){var o,p=Worker;p.prototype.addEventListener?o=p.prototype.addEventListener:p.prototype.attachEvent&&(o=p.prototype.attachEvent),b.Worker=function(){var a=new p(arguments[0]),b=o;return b.call(a,"message",l),a},Worker.prototype=p.prototype,n(Worker.prototype),Worker.postMessage=function(a,b,c){for(var d,e=j.encodeEvent(b,c,!1),f=0;f<c.length;f++)d=c[f]._getEntangledPort(),d._currentTarget=a;j.log(c,"handshake worker",a),a.postMessage(e)}}}else c?c.postMessage=function(a,b,c,d){d=d||[],a.postMessage(b,c,d)}:b.Worker={postMessage:function(a,b,c){a.postMessage(b,c)}},b.Worker&&(b.Worker.postMessage=function(a,b,c){a.postMessage(b,c)})}(this),UUID.generate=function(){var a=UUID._gri,b=UUID._ha;return b(a(32),8)+"-"+b(a(16),4)+"-"+b(16384|a(12),4)+"-"+b(32768|a(14),4)+"-"+b(a(48),12)},UUID._gri=function(a){return 0>a?0/0:30>=a?0|Math.random()*(1<<a):53>=a?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<a-30)):0/0},UUID._ha=function(a,b){for(var c=a.toString(16),d=b-c.length,e="0";d>0;d>>>=1,e+=e)1&d&&(c=e+c);return c},define("rsvp/all",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("You must pass an array to all.");return new d(function(b,c){function d(a){return function(b){e(a,b)}}function e(a,c){g[a]=c,0===--h&&b(g)}var f,g=[],h=a.length;0===h&&b([]);for(var i=0;i<a.length;i++)f=a[i],f&&"function"==typeof f.then?f.then(d(i),c):e(i,f)})}var d=a.Promise;b.all=c}),define("rsvp/async",["exports"],function(a){"use strict";function b(){return function(a,b){process.nextTick(function(){a(b)})}}function c(){return function(a,b){setImmediate(function(){a(b)})}}function d(){var a=[],b=new h(function(){var b=a.slice();a=[],b.forEach(function(a){var b=a[0],c=a[1];b(c)})}),c=document.createElement("div");return b.observe(c,{attributes:!0}),window.addEventListener("unload",function(){b.disconnect(),b=null},!1),function(b,d){a.push([b,d]),c.setAttribute("drainQueue","drainQueue")}}function e(){return function(a,b){i.setTimeout(function(){a(b)},1)}}var f,g="undefined"!=typeof window?window:{},h=g.MutationObserver||g.WebKitMutationObserver,i="undefined"!=typeof global?global:this;f="function"==typeof setImmediate?c():"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():h?d():e(),a.async=f}),define("rsvp/config",["rsvp/async","exports"],function(a,b){"use strict";var c=a.async,d={};d.async=c,b.config=d}),define("rsvp/defer",["rsvp/promise","exports"],function(a,b){"use strict";function c(){var a={resolve:void 0,reject:void 0,promise:void 0};return a.promise=new d(function(b,c){a.resolve=b,a.reject=c}),a}var d=a.Promise;b.defer=c}),define("rsvp/events",["exports"],function(a){"use strict";var b=function(a,b){this.type=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},c=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c][0]===b)return c;return-1},d=function(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b},e={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a},on:function(a,b,e){var f,g,h=d(this);for(a=a.split(/\s+/),e=e||this;g=a.shift();)f=h[g],f||(f=h[g]=[]),-1===c(f,b)&&f.push([b,e])},off:function(a,b){var e,f,g,h=d(this);for(a=a.split(/\s+/);f=a.shift();)b?(e=h[f],g=c(e,b),-1!==g&&e.splice(g,1)):h[f]=[]},trigger:function(a,c){var e,f,g,h,i,j=d(this);if(e=j[a])for(var k=0;k<e.length;k++)f=e[k],g=f[0],h=f[1],"object"!=typeof c&&(c={detail:c}),i=new b(a,c),g.call(h,i)}};a.EventTarget=e}),define("rsvp/hash",["rsvp/defer","exports"],function(a,b){"use strict";function c(a){var b=0;for(var c in a)b++;return b}function d(a){var b={},d=e(),f=c(a);0===f&&d.resolve({});var g=function(a){return function(b){h(a,b)}},h=function(a,c){b[a]=c,0===--f&&d.resolve(b)},i=function(a){d.reject(a)};for(var j in a)a[j]&&"function"==typeof a[j].then?a[j].then(g(j),i):h(j,a[j]);return d.promise}var e=a.defer;b.hash=d}),define("rsvp/node",["rsvp/promise","rsvp/all","exports"],function(a,b,c){"use strict";function d(a,b){return function(c,d){c?b(c):arguments.length>2?a(Array.prototype.slice.call(arguments,1)):a(d)}}function e(a){return function(){var b,c,e=Array.prototype.slice.call(arguments),h=this,i=new f(function(a,d){b=a,c=d});return g(e).then(function(e){e.push(d(b,c));try{a.apply(h,e)}catch(f){c(f)}}),i}}var f=a.Promise,g=b.all;c.denodeify=e}),define("rsvp/promise",["rsvp/config","rsvp/events","exports"],function(a,b,c){"use strict";function d(a){return e(a)||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){k.onerror&&k.onerror(a.detail)}function g(a,b){a===b?i(a,b):h(a,b)||i(a,b)}function h(a,b){var c,f=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(d(b)&&(f=b.then,e(f)))return f.call(b,function(d){return c?!0:(c=!0,b!==d?g(a,d):i(a,d),void 0)},function(b){return c?!0:(c=!0,j(a,b),void 0)}),!0}catch(h){return j(a,h),!0}return!1}function i(a,b){k.async(function(){a.trigger("promise:resolved",{detail:b}),a.isFulfilled=!0,a.fulfillmentValue=b})}function j(a,b){k.async(function(){a.trigger("promise:failed",{detail:b}),a.isRejected=!0,a.rejectedReason=b})}var k=a.config,l=b.EventTarget,m=function(a){var b=this,c=!1;if("function"!=typeof a)throw new TypeError("You must pass a resolver function as the sole argument to the promise constructor");if(!(b instanceof m))return new m(a);var d=function(a){c||(c=!0,g(b,a))},e=function(a){c||(c=!0,j(b,a))};this.on("promise:resolved",function(a){this.trigger("success",{detail:a.detail})},this),this.on("promise:failed",function(a){this.trigger("error",{detail:a.detail})},this),this.on("error",f);try{a(d,e)}catch(h){e(h)}},n=function(a,b,c,d){var f,i,k,l,m=e(c);if(m)try{f=c(d.detail),k=!0}catch(n){l=!0,i=n}else f=d.detail,k=!0;h(b,f)||(m&&k?g(b,f):l?j(b,i):"resolve"===a?g(b,f):"reject"===a&&j(b,f))};m.prototype={constructor:m,isRejected:void 0,isFulfilled:void 0,rejectedReason:void 0,fulfillmentValue:void 0,then:function(a,b){this.off("error",f);var c=new this.constructor(function(){});return this.isFulfilled&&k.async(function(b){n("resolve",c,a,{detail:b.fulfillmentValue})},this),this.isRejected&&k.async(function(a){n("reject",c,b,{detail:a.rejectedReason})},this),this.on("promise:resolved",function(b){n("resolve",c,a,b)}),this.on("promise:failed",function(a){n("reject",c,b,a)}),c},fail:function(a){return this.then(null,a)}},l.mixin(m.prototype),c.Promise=m}),define("rsvp/reject",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){return new d(function(b,c){c(a)})}var d=a.Promise;b.reject=c}),define("rsvp/resolve",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){return new d(function(b){b(a)})}var d=a.Promise;b.resolve=c}),define("rsvp/rethrow",["exports"],function(a){"use strict";function b(a){throw c.setTimeout(function(){throw a}),a}var c="undefined"==typeof global?this:global;a.rethrow=b}),define("rsvp",["rsvp/events","rsvp/promise","rsvp/node","rsvp/all","rsvp/hash","rsvp/rethrow","rsvp/defer","rsvp/config","rsvp/resolve","rsvp/reject","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(a,b){t[a]=b}var m=a.EventTarget,n=b.Promise,o=c.denodeify,p=d.all,q=e.hash,r=f.rethrow,s=g.defer,t=h.config,u=i.resolve,v=j.reject;k.Promise=n,k.EventTarget=m,k.all=p,k.hash=q,k.rethrow=r,k.defer=s,k.denodeify=o,k.configure=l,k.resolve=u,k.reject=v}),define("oasis",["oasis/util","oasis/connect","rsvp","oasis/logger","oasis/version","oasis/config","oasis/sandbox","oasis/sandbox_init","oasis/service","oasis/iframe_adapter","oasis/webworker_adapter"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";function l(){this.packages={},this.requestId=0,this.oasisId="oasis"+ +new Date,this.consumers={},this.services=[],this.ports={},this.handlers={},this.receivedPorts=!1,this.configuration=new f}var m=a.assert,n=b.connect,o=b.connectCapabilities,p=b.portFor;return l.Version=e,l.Service=l.Consumer=i,l.RSVP=c,l.adapters={iframe:j,webworker:k},l.prototype={logger:d,log:function(){this.logger.log.apply(this.logger,arguments)},createSandbox:function(a){return new g(this,a)},register:function(a){m(a.capabilities,"You are trying to register a package without any capabilities. Please provide a list of requested capabilities, or an empty array ([])."),this.packages[a.url]=a},configure:function(a,b){this.configuration[a]=b},autoInitializeSandbox:h,connect:n,connectCapabilities:o,portFor:p},l}),define("oasis/base_adapter",["oasis/util","oasis/shims","oasis/connect","oasis/message_channel","rsvp","oasis/logger"],function(a,b,c,d,e,f){"use strict";function g(){var a=document.createElement("a");a.href="!";var b=a.href.slice(0,-1);return b}function h(){}var i=a.mustImplement,j=b.addEventListener,k=b.removeEventListener;c.connectCapabilities;var l=d.PostMessageMessageChannel;return h.prototype={loadScripts:i("BaseAdapter","loadScripts"),name:i("BaseAdapter","name"),oasisURL:function(a){return a.options.oasisURL||a.oasis.configuration.oasisURL},createChannel:function(a){var b=new l(a);return b.port1.start(),b},environmentPort:function(a,b){return b.port1},sandboxPort:function(a,b){return b.port2},proxyPort:function(a,b){return b},connectSandbox:function(a,b){function c(e){e.data.isOasisInitialization&&(k(a,"message",c),b.configuration.eventCallback(function(){f.log("Sandbox received initialization message."),b.configuration.oasisURL=e.data.oasisURL,d.loadScripts(e.data.base,e.data.scriptURLs),b.connectCapabilities(e.data.capabilities,e.ports),d.didConnect()}))}var d=this;f.log("Sandbox listening for initialization message"),j(a,"message",c),d.oasisLoaded()},createInitializationMessage:function(a){var b=a.options.url,c=a.dependencies||[],d="js"===a.type?[b].concat(c):c;return{isOasisInitialization:!0,capabilities:a._capabilitiesToConnect,base:g(),scriptURLs:d,oasisURL:this.oasisURL(a)}},oasisLoadedMessage:"oasisSandboxLoaded",sandboxInitializedMessage:"oasisSandboxInitialized"},h}),define("oasis/config",[],function(){"use strict";function a(){this.oasisURL="oasis.js.html",this.eventCallback=function(a){a()},this.allowSameOrigin=!1}return a}),define("oasis/connect",["oasis/util","oasis/shims","oasis/message_channel","rsvp","oasis/logger","exports"],function(a,b,c,d,e,f){"use strict";function g(a,b,c){var f=a.ports[b];f?(e.log("Found port, setting up '"+b+"'"),c.setupCapability(f),c.promise?c.promise.then(function(){f.start()}).fail(d.rethrow):f.start()):a.receivedPorts?(e.log("No port was sent for capability '"+b+"'"),c.rejectCapability()):(e.log("No port found, saving handler for '"+b+"'"),a.handlers[b]=c)}function h(a,b,c){return"object"==typeof a?k(this,a.consumers):b?l(this,a,b,c):m(this,a)}function i(a,b){var c=this;o.call(a,function(a,f){var g=c.handlers[a],h=new p(c,b[f]);g&&(e.log("Invoking handler for '"+a+"'"),d.resolve(g.setupCapability(h)).then(function(){h.start()}).fail(d.rethrow)),c.ports[a]=h}),this.receivedPorts=!0}function j(a){var b=this.ports[a];return n(b,"You asked for the port for the '"+a+"' capability, but the environment did not provide one."),b}function k(a,b){function c(b,c){return function(d){var e=new b(d);a.consumers[c]=e,e.initialize(d,c)}}function d(a){return function(){b[a].prototype.error()}}for(var e in b)g(a,e,{setupCapability:c(b[e],e),rejectCapability:d(e)})}function l(a,b,c,d){e.log("Connecting to '"+b+"' with callback."),g(a,b,{setupCapability:function(a){c(a)},rejectCapability:function(){d&&d()}})}function m(a,b){e.log("Connecting to '"+b+"' with promise.");var c=d.defer();return g(a,b,{promise:c.promise,setupCapability:function(a){return c.resolve(a),c.promise},rejectCapability:function(){c.reject()}}),c.promise}var n=a.assert,o=b.a_forEach,p=c.PostMessagePort;f.registerHandler=g,f.connect=h,f.connectCapabilities=i,f.portFor=j}),define("oasis/iframe_adapter",["oasis/util","oasis/shims","rsvp","oasis/logger","oasis/base_adapter"],function(a,b,c,d,e){"use strict";function f(a,b){var c,d=document.createElement("iframe");if(!a.configuration.allowSameOrigin&&void 0===d.sandbox&&(c=document.createElement("a"),c.href=b,!c.host||c.protocol===window.location.protocol&&c.host===window.location.host))throw new Error("Security: iFrames from the same host cannot be sandboxed in older browsers and is disallowed.  You can override this behaviour with `Oasis.configure('allowSameOrigin', true)`, but please be absolutely sure you know this is safe for your environment before doing so.")}var g=a.assert,h=a.extend,i=b.addEventListener,j=b.removeEventListener,k=b.a_map,l=h(e,{initializeSandbox:function(a){var b=a.options,e=document.createElement("iframe"),h=this.oasisURL(a);switch(e.name=a.options.url+"?uuid="+UUID.generate(),e.sandbox="allow-scripts",e.seamless=!0,b.width?e.width=b.width:b.height&&(e.height=b.height),a.type){case"js":f(a.oasis,h),this._setupIFrameBootstrap(e,a,h);break;case"html":f(a.oasis,a.options.url),e.src=a.options.url;break;default:g(!1,"IFrame Adapter only supports sandbox types `js` and `html`, not `"+a.type+"`")}return d.log("Initializing sandbox "+e.name),a._waitForLoadDeferred().resolve(new c.Promise(function(b){e.initializationHandler=function(c){if(c.data===a.adapter.sandboxInitializedMessage){try{if(c.source!==e.contentWindow)return}catch(f){return}j(window,"message",e.initializationHandler),a.oasis.configuration.eventCallback(function(){d.log("container: iframe sandbox has initialized (capabilities connected)"),b(a)})}},i(window,"message",e.initializationHandler)})),a.el=e,new c.Promise(function(b){e.oasisLoadHandler=function(c){if(c.data===a.adapter.oasisLoadedMessage){try{if(c.source!==e.contentWindow)return}catch(f){return}j(window,"message",e.oasisLoadHandler),a.oasis.configuration.eventCallback(function(){d.log("container: iframe sandbox has loaded Oasis"),b(a)})}},i(window,"message",e.oasisLoadHandler)})},startSandbox:function(a){var b=document.head||document.documentElement.getElementsByTagName("head")[0];b.appendChild(a.el)},terminateSandbox:function(a){var b=a.el;a.terminated=!0,b.loadHandler&&j(b,"load",b.loadHandler),j(window,"message",b.initializationHandler),j(window,"message",b.oasisLoadHandler),b.parentNode&&(d.log("Terminating sandbox ",a.el.name),b.parentNode.removeChild(b)),a.el=null},connectPorts:function(a,b){var c=k.call(b,function(a){return a.port}),d=this.createInitializationMessage(a);a.terminated||Window.postMessage(a.el.contentWindow,d,"*",c)},connectSandbox:function(a){return e.prototype.connectSandbox.call(this,window,a)},oasisLoaded:function(){window.parent.postMessage(this.oasisLoadedMessage,"*",[])},didConnect:function(){window.parent.postMessage(this.sandboxInitializedMessage,"*",[])},loadScripts:function(a,b){var c,d=document.head||document.documentElement.getElementsByTagName("head")[0],e=document.createElement("base");e.href=a,d.insertBefore(e,d.childNodes[0]||null);for(var f=0;f<b.length;++f)c=document.createElement("script"),c.src=b[f],c.async=!1,d.appendChild(c)},name:function(a){return a.el.name},_setupIFrameBootstrap:function(a,b,c){a.src="about:blank",a.loadHandler=function(){j(a,"load",a.loadHandler),b.oasis.configuration.eventCallback(function(){d.log("iframe loading oasis"),a.contentWindow.location.href=c})},i(a,"load",a.loadHandler)}}),m=new l;return m}),define("oasis/logger",[],function(){"use strict";function a(){this.enabled=!1}a.prototype={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},log:function(){if(b.enabled)if("undefined"!=typeof console&&"function"==typeof console.log)console.log.apply(console,arguments);else if("undefined"!=typeof console&&"object"==typeof console.log)try{switch(arguments.length){case 1:console.log(arguments[0]);break;case 2:console.log(arguments[0],arguments[1]);break;default:console.log(arguments[0],arguments[1],arguments[2])}}catch(a){}}};var b=new a;return b}),define("oasis/message_channel",["oasis/util","rsvp","exports"],function(a,b,c){"use strict";function d(){}function e(a){return a.oasisId+"-"+a.requestId++}function f(){}var g=a.extend,h=a.mustImplement;d.prototype={on:h("OasisPort","on"),all:h("OasisPort","all"),off:h("OasisPort","off"),send:h("OasisPort","send"),start:h("OasisPort","start"),close:h("OasisPort","close"),request:function(a){var c=this.oasis,d=this,f=[].slice.call(arguments,1);return new b.Promise(function(b,g){var h=e(c),i=function(){d.off("@response:"+a,j),d.off("@errorResponse:"+a,k)},j=function(a){a.requestId===h&&(i(),b(a.data))},k=function(a){a.requestId===h&&(i(),g(a.data))};d.on("@response:"+a,j,d),d.on("@errorResponse:"+a,k,d),d.send("@request:"+a,{requestId:h,args:f})})},onRequest:function(a,c,d){var e=this;this.on("@request:"+a,function(f){var g=f.requestId,h=(f.args,new b.Promise(function(b,e){var g=c.apply(d,f.args);void 0!==g?b(g):e("@request:"+a+" ["+f.requestId+"] did not return a value.  If you want to return a literal `undefined` return `RSVP.resolve(undefined)`")}));h.then(function(b){e.send("@response:"+a,{requestId:g,data:b})},function(b){var c=b;b instanceof Error&&(c={message:b.message,stack:b.stack}),e.send("@errorResponse:"+a,{requestId:g,data:c})})})}},f.prototype={start:h("OasisMessageChannel","start")};var i=g(f,{initialize:function(a){this.channel=new MessageChannel,this.port1=new j(a,this.channel.port1),this.port2=new j(a,this.channel.port2)},start:function(){this.port1.start(),this.port2.start()},destroy:function(){this.port1.close(),this.port2.close(),delete this.port1,delete this.port2,delete this.channel}}),j=g(d,{initialize:function(a,b){this.oasis=a,this.port=b,this._callbacks=[]},on:function(a,b,c){function d(d){d.data.type===a&&e.configuration.eventCallback(function(){return b.call(c,d.data.data)})}var e=this.oasis;this._callbacks.push([b,d]),this.port.addEventListener("message",d)},all:function(a,b){function c(c){d.configuration.eventCallback(function(){a.call(b,c.data.type,c.data.data)})}var d=this.oasis;this.port.addEventListener("message",c)},off:function(a,b){for(var c,d=0,e=this._callbacks.length;e>d;d++)c=this._callbacks[d],c[0]===b&&this.port.removeEventListener("message",c[1])},send:function(a,b){this.port.postMessage({type:a,data:b})},start:function(){this.port.start()},close:function(){for(var a,b=0,c=this._callbacks.length;c>b;b++)a=this._callbacks[b],this.port.removeEventListener("message",a[1]);this._callbacks=[],this.port.close()}});c.OasisPort=d,c.PostMessageMessageChannel=i,c.PostMessagePort=j}),define("oasis/sandbox",["oasis/util","oasis/shims","oasis/message_channel","rsvp","oasis/logger","oasis/iframe_adapter"],function(a,b,c,d,e,f){"use strict";var g=a.assert,h=b.a_forEach,i=b.a_reduce,j=c.OasisPort,k=function(a,b){this.connections={},this.wiretaps=[],this.oasis=a;var c=a.packages[b.url],e=b.capabilities;e||(g(c,"You are trying to create a sandbox from an unregistered URL without providing capabilities. Please use Oasis.register to register your package or pass a list of capabilities to createSandbox."),e=c.capabilities),c=c||{},this.dependencies=b.dependencies||c.dependencies,this.adapter=b.adapter||f,this.type=b.type||"js",this._capabilitiesToConnect=e,this.envPortDefereds={},this.sandboxPortDefereds={},this.channels={},this.capabilities={},this.options=b,h.call(e,function(a){this.envPortDefereds[a]=d.defer(),this.sandboxPortDefereds[a]=d.defer()},this);var i=this;this.adapter.initializeSandbox(this).then(function(){i.createChannels(),i.connectPorts()}).fail(d.rethrow)};return k.prototype={waitForLoad:function(){return this._waitForLoadDeferred().promise},wiretap:function(a){this.wiretaps.push(a)},connect:function(a){var b=this.envPortDefereds[a].promise;return g(b,"Connect was called on '"+a+"' but no such capability was registered."),b},createChannels:function(){var a=this,b=this.options.services||{},c=this.channels;h.call(this._capabilitiesToConnect,function(d){e.log("Will create port for '"+d+"'");var f,g,i=b[d];if(i instanceof j)g=this.adapter.proxyPort(this,i),this.capabilities[d]=i;else{f=c[d]=this.adapter.createChannel(a.oasis);var k=this.adapter.environmentPort(this,f),l=this.adapter.sandboxPort(this,f);e.log("Wiretapping '"+d+"'"),k.all(function(a,b){h.call(this.wiretaps,function(c){c(d,{type:a,data:b,direction:"received"})})},this),h.call(this.wiretaps,function(a){var b=k.send;k.send=function(c,e){a(d,{type:c,data:e,direction:"sent"}),b.apply(k,arguments)
}}),i&&(e.log("Creating service for '"+d+"'"),i=new i(k,this),i.initialize(k,d),a.oasis.services.push(i),this.capabilities[d]=i),g=l,this.envPortDefereds[d].resolve(k)}e.log("Port created for '"+d+"'"),this.sandboxPortDefereds[d].resolve(g)},this)},destroyChannels:function(){for(var a in this.channels)this.channels[a].destroy(),delete this.channels[a];this.channels=[]},connectPorts:function(){var a=this,b=i.call(this._capabilitiesToConnect,function(b,c){return b.concat(a.sandboxPortDefereds[c].promise)},[]);d.all(b).then(function(b){e.log("All "+b.length+" ports created.  Transferring them."),a.adapter.connectPorts(a,b)}).fail(d.rethrow)},start:function(a){this.adapter.startSandbox(this,a)},terminate:function(){var a=this;if(!this.isTerminated){this.isTerminated=!0,this.adapter.terminateSandbox(this),this.destroyChannels();for(var b=0;b<a.oasis.services.length;b++)a.oasis.services[b].destroy(),delete a.oasis.services[b];a.oasis.services=[]}},name:function(){return this.adapter.name(this)},_waitForLoadDeferred:function(){return this._loadDeferred||(this._loadDeferred=d.defer()),this._loadDeferred}},k}),define("oasis/sandbox_init",["oasis/iframe_adapter","oasis/webworker_adapter"],function(a,b){"use strict";function c(){if("undefined"!=typeof window){if(/PhantomJS/.test(navigator.userAgent))return;window.parent&&window.parent!==window&&a.connectSandbox(this)}else b.connectSandbox(this)}return c}),define("oasis/service",["oasis/shims"],function(a){"use strict";function b(a,b){function c(a){return function(){return a.apply(f,arguments)}}var d,e,f=this;this.sandbox=b,this.port=a;for(d in this.events)e=this.events[d],a.on(d,c(e));for(d in this.requests)e=this.requests[d],a.onRequest(d,c(e))}var c=a.o_create;return b.prototype={initialize:function(){},error:function(){},destroy:function(){},send:function(){return this.port.send.apply(this.port,arguments)},request:function(){return this.port.request.apply(this.port,arguments)}},b.extend=function d(a){function b(){b.prototype.init&&b.prototype.init.call(this),e.apply(this,arguments)}var e=this;b.extend=d;var f=b.prototype=c(this.prototype);for(var g in a)f[g]=a[g];return b},b}),define("oasis/shims",["exports"],function(a){"use strict";function b(a,b){if(f.prototype=a,a=new f,b){f.prototype=a;for(var c in b)f.prototype[c]=b[c].value;a=new f}return f.prototype=null,a}function c(a,b,c){return a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):void 0}function d(a,b,c){return a.removeEventListener?a.removeEventListener(b,c):a.detachEvent?a.detachEvent("on"+b,c):void 0}function e(a){return a&&Function.prototype.toString.call(a).indexOf("[native code]")>-1}var f=function(){},g=e(Array.prototype.forEach)?Array.prototype.forEach:function(a){if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments[1],e=0;c>e;e++)e in b&&a.call(d,b[e],e,b)},h=e(Array.prototype.reduce)?Array.prototype.reduce:function(a,b){if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d=0,e=this.length>>>0,f=!1;for(1<arguments.length&&(c=b,f=!0);e>d;++d)this.hasOwnProperty(d)&&(f?c=a(c,this[d],d,this):(c=this[d],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return c},i=e(Array.prototype.map)?Array.prototype.map:function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(b&&(c=b),d=new Array(g),e=0;g>e;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d};a.o_create=b,a.addEventListener=c,a.removeEventListener=d,a.a_forEach=g,a.a_reduce=h,a.a_map=i}),define("oasis/util",["oasis/shims","exports"],function(a,b){"use strict";function c(a,b){if(!a)throw new Error(b)}function d(a,b){return function(){throw new Error("Subclasses of "+a+" must implement "+b)}}function e(a,b){function c(){a.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}c.prototype=f(a.prototype);for(var d in b)b.hasOwnProperty(d)&&(c.prototype[d]=b[d]);return c}var f=a.o_create;b.assert=c,b.mustImplement=d,b.extend=e}),define("oasis/version",[],function(){"use strict";return"0.3.0"}),define("oasis/webworker_adapter",["oasis/util","oasis/shims","rsvp","oasis/logger","oasis/base_adapter"],function(a,b,c,d,e){"use strict";var f=a.assert,g=a.extend,h=b.a_forEach,i=b.addEventListener,j=b.removeEventListener,k=g(e,{initializeSandbox:function(a){f("html"!==a.type,"Webworker adapter only supports type `js` sandboxes, but type `html` was requested.");var b=this.oasisURL(a),e=new Worker(b);return e.name=a.options.url+"?uuid="+UUID.generate(),a.worker=e,a._waitForLoadDeferred().resolve(new c.Promise(function(b){e.initializationHandler=function(c){a.oasis.configuration.eventCallback(function(){c.data===a.adapter.sandboxInitializedMessage&&(j(e,"message",e.initializationHandler),d.log("worker sandbox initialized"),b(a))})},i(e,"message",e.initializationHandler)})),new c.Promise(function(b){e.loadHandler=function(c){a.oasis.configuration.eventCallback(function(){c.data===a.adapter.oasisLoadedMessage&&(j(e,"message",e.loadHandler),d.log("worker sandbox initialized"),b(a))})},i(e,"message",e.loadHandler)})},startSandbox:function(){},terminateSandbox:function(a){var b=a.worker;j(b,"message",b.loadHandler),j(b,"message",b.initializationHandler),a.worker.terminate()},connectPorts:function(a,b){var c=b.map(function(a){return a.port}),d=this.createInitializationMessage(a);Worker.postMessage(a.worker,d,c)},connectSandbox:function(a){return e.prototype.connectSandbox.call(this,self,a)},loadScripts:function(a,b){var c=[];h.call(b,function(b){c.push(a+b)}),importScripts.apply(void 0,c)},name:function(a){return a.worker.name},oasisLoaded:function(){postMessage(this.oasisLoadedMessage,[])},didConnect:function(){postMessage(this.sandboxInitializedMessage,[])}}),l=new k;return l}),self.Oasis=requireModule("oasis"),self.oasis=new self.Oasis,self.oasis.autoInitializeSandbox();

/*
</script>
<script id="jsfr_executor">
var codeEl = document.getElementById('jsfr_payload'),
    codePlus = codeEl.innerHTML,
    code = codePlus.substring(0, codePlus.length-3),
    elIds = ['jsfr_payload', 'jsfr_executor'],
    el;

for (var i=0; i<elIds.length; ++i) {
  el = document.getElementById(elIds[i]);
  el.parentNode.removeChild(el);
}
eval(code);
</script>
</head>
<body style="display:none;">
</body>
</html>*/
